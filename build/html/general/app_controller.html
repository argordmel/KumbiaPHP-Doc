<!DOCTYPE html>



<html>
    <head>
        <meta charset="utf-8">
	    
            <title>AppController &mdash; KumbiaPHP Framework 1.0-dev documentation</title>

	    <link rel="stylesheet" href="../_static/asset/css/common.css" type="text/css" />
	    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
            <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Ubuntu+Mono:400,400italic,700,700italic" media="all">
                <script type="text/javascript">
                  var DOCUMENTATION_OPTIONS = {
                    URL_ROOT:    '../',
                    VERSION:     '1.0-dev',
                    COLLAPSE_INDEX: false,
                    FILE_SUFFIX: '.html',
                    HAS_SOURCE:  false
                  };
                </script>
                <script type="text/javascript" src="../_static/jquery.js"></script>
                <script type="text/javascript" src="../_static/underscore.js"></script>
                <script type="text/javascript" src="../_static/doctools.js"></script>
	    <link rel="top" title="KumbiaPHP Framework 1.0-dev documentation" href="../index.html" /> 
	</head>
	<body>
        
            <nav>
                <div class="row">
                    <a href="http://kumbiaphp.com/" class="logo span3" title="KumbiaPHP Framework PHP MVC"><img src="../_static/asset/img/KumbiaPHP-logo.png" alt="KumbiaPHP Framework" width="259" height="30"></a>                
                    <p class="user-guide">1.0-dev Guía de Usuario</p>                
                </div>
            </nav>           

            <header id="header">
                <div class="row" style="max-width: 100%">
                    <div class="span6 pull-right"><form class="search form" action="../search.html" method="get">
    <input type="text" name="q" id="q" value="" />
    <input type="submit" value="BUSCAR" class="btn" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
</form>                        
                    </div>
                    <div class="span6">
                        <ul class="breadcrumb">
                            <li><a href="../index.html">Inicio - Guía de Usuario</a>&nbsp;&nbsp; &rsaquo;</li>
                            <li><strong>AppController</strong></li>
                        </ul>
                    </div>
                </div>
            </header>

            <div class="row" id="content">
  <div class="section" id="appcontroller">
<h1><a class="toc-backref" href="#id1">AppController</a><a class="headerlink" href="#appcontroller" title="Permalink to this headline">¶</a></h1>
<p>Es importante recordar que KumbiaPHP es un framework MVC y POO. En este sentido existe
la clase <strong>AppController</strong> y es la súper clase de los controladores, todos deben
heredar <em>extends</em> de esta clase para tener las propiedades (atributos) y métodos
que facilitan la interacción entre la capa del modelo y presentación.</p>
<p>La clase AppController esta definida en <tt class="docutils literal"><span class="pre">app/libs/app_controller.php</span></tt> es una
clase muy sencilla de usar y es clave dentro del MVC.</p>
<div class="contents topic" id="contenido">
<p class="topic-title first">Contenido</p>
<ul class="simple">
<li><a class="reference internal" href="#appcontroller" id="id1">AppController</a><ul>
<li><a class="reference internal" href="#variables-y-o-atributos" id="id2">Variables y/o Atributos</a></li>
<li><a class="reference internal" href="#filtros-y-callback" id="id3">Filtros y Callback</a><ul>
<li><a class="reference internal" href="#filtro-initialize" id="id4">Filtro initialize</a></li>
<li><a class="reference internal" href="#filtro-finalize" id="id5">Filtro finalize</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="variables-y-o-atributos">
<h2><a class="toc-backref" href="#id2">Variables y/o Atributos</a><a class="headerlink" href="#variables-y-o-atributos" title="Permalink to this headline">¶</a></h2>
<p>Cada controlador que herede de esta súper clase, heredará también sus atributos,
de esta manera, podemos identificar el nombre del módulo, controlador, método y/o
parámetros recibidos.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">$this-&gt;module_name</span></tt>: Módulo actual de los controlador en ejecución</li>
<li><tt class="docutils literal"><span class="pre">$this-&gt;controller_name</span></tt>: Nombre del controlador actual en ejecución</li>
<li><tt class="docutils literal"><span class="pre">$this-&gt;action_name</span></tt>: Nombre del método actual en ejecución</li>
<li><tt class="docutils literal"><span class="pre">$this-&gt;parameters</span></tt>: Array de datos con los parámetros recibidos para el método en ejecución</li>
</ul>
</div>
<div class="section" id="filtros-y-callback">
<h2><a class="toc-backref" href="#id3">Filtros y Callback</a><a class="headerlink" href="#filtros-y-callback" title="Permalink to this headline">¶</a></h2>
<p>Esta súper clase posee 2 filtros que se ejecutan antes y después de cada
controlador. La estructura es la siguiente:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">AppController</span> <span class="k">extends</span> <span class="nx">Controller</span> <span class="p">{</span>

    <span class="k">final</span> <span class="k">protected</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">()</span> <span class="p">{</span>

    <span class="p">}</span>

    <span class="k">final</span> <span class="k">protected</span> <span class="k">function</span> <span class="nf">finalize</span><span class="p">()</span> <span class="p">{</span>

    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="filtro-initialize">
<h3><a class="toc-backref" href="#id4">Filtro initialize</a><a class="headerlink" href="#filtro-initialize" title="Permalink to this headline">¶</a></h3>
<p>Este filtro se ejecuta antes de cada controlador que herede de esta súper clase. Dentro
de sus utilidades podemos usarlas para definir un template, verificar permisos, validar
sesiones, etc.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">AppController</span> <span class="k">extends</span> <span class="nx">Controller</span> <span class="p">{</span>

    <span class="k">final</span> <span class="k">protected</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">()</span> <span class="p">{</span>
        <span class="sd">/**</span>
<span class="sd">         * Si el método de entrada es ajax, el tipo de respuesta es sólo la vista</span>
<span class="sd">         */</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">Input</span><span class="o">::</span><span class="na">isAjax</span><span class="p">())</span> <span class="p">{</span>
            <span class="nx">View</span><span class="o">::</span><span class="na">template</span><span class="p">(</span><span class="k">NULL</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">final</span> <span class="k">protected</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">()</span> <span class="p">{</span>

    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="filtro-finalize">
<h3><a class="toc-backref" href="#id5">Filtro finalize</a><a class="headerlink" href="#filtro-finalize" title="Permalink to this headline">¶</a></h3>
<p>Este filtro se ejecuta después de cada controlador. Dentro de sus utilidades
podemos usarlas para definir un título de página acorde a un método entre otras.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">AppController</span> <span class="k">extends</span> <span class="nx">Controller</span> <span class="p">{</span>

    <span class="sd">/**</span>
<span class="sd">     * Titulo de la página</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="nv">$page_title</span> <span class="o">=</span> <span class="s1">&#39;Página sin título&#39;</span><span class="p">;</span>

    <span class="k">final</span> <span class="k">protected</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">()</span> <span class="p">{</span>

    <span class="p">}</span>

    <span class="k">final</span> <span class="k">protected</span> <span class="k">function</span> <span class="nf">finalize</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">//Se cambia el título de la página</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">page_title</span> <span class="o">=</span> <span class="nx">trim</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">page_title</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39; ‹ &#39;</span><span class="o">.</span><span class="nx">APP_NAME</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>


            </div>			
            <footer>
                <div class="row">
                    <div class="span6">
                        <p><a href="#header" title="Regresar a arriba">Regresar a arriba</a></p>
                        <p><a href="http://kumbiaphp.com/">KumbiaPHP Framework</a> &ndash; Copyright &copy; 2014 KumbiaPHP Framework</p>
                    </div>
                    <div id="social" class="span6">
                        <p>¡Compártelo!</p>
                        <a class="social facebook" rel="nofollow" href="https://www.facebook.com/share.php?u=http://proto.kumbiaphp.com/&t=KumbiaPHP web y app PHP Framework en español - KumbiaPHP" title="Facebook" target="_blank"></a>
                        <a class="social twitter" rel="nofollow" href="https://twitter.com/intent/tweet?text=KumbiaPHP web y app PHP Framework en español - KumbiaPHP&url=http://proto.kumbiaphp.com/&via=KumbiaPHP" title="Twitter" target="_blank"></a>
                        <a class="social google" rel="nofollow" href="https://plusone.google.com/_/+1/confirm?hl=es&url=http://proto.kumbiaphp.com/" title="Google +1" target="_blank"></a>
                    </div>
                </div>
            </footer>
	</body>
</html>